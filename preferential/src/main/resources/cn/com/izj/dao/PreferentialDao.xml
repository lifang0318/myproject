<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.com.izj.dao.PreferentialDao">

    <select id="findByCondition" resultType="cn.com.izj.base.entity.preferential.Preferential"
            parameterType="cn.com.izj.dto.PreferentialCondition">
        select * from preferential
        <trim prefix="where" prefixOverrides="and|or">
            <if test=" name != null and name != '' ">
                and name like concat(concat('%',#{name}),'%')
            </if>
            <if test=" type !=null ">
                and type = #{type}
            </if>
            <if test=" state != null ">
                and state = #{state}
            </if>
            <if test=" forbiddenState != null ">
                and forbidden_state = #{forbiddenState}
            </if>
            <if test=" startTime != null ">
                and create_time &gt;= #{startTime}
            </if>
            <if test=" endTime != null ">
                and create_time &lt;= #{endTime}
            </if>
        </trim>
        order by create_time desc
    </select>

    <select id="findRegisterPreferential" resultType="cn.com.izj.base.entity.preferential.Preferential">
        select *
        from preferential
        where forbidden_state = 1 and type = #{type}
    </select>
</mapper>